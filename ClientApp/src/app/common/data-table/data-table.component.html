<table mat-table [dataSource]="dataSource" *ngIf="dataSource.filteredData.length>0">
  <caption></caption>
  <ng-container *ngFor="let column of columns;" [cdkColumnDef]="column.columnDef">
    <ng-container *ngIf="column.columnDef === 'status_flag'; else notSelect">
      <th id="" mat-header-cell *matHeaderCellDef>
        <mat-checkbox style="margin-left: 20px;" *ngIf="isSelectAllEnabled" (change)="$event ? masterToggle() : null"
          [checked]="selection.hasValue() && isAllSelected()" [indeterminate]="selection.hasValue() && !isAllSelected()"
          (change)="selectUser()">
        </mat-checkbox>
        {{ column.header }}
      </th>
      <td mat-cell *matCellDef="let row">
        <mat-checkbox style="margin-left: 7px;" (click)="highlightRow(row)" (click)="$event.stopPropagation()"
          (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)"
          (change)="selectRow($event,row)" (change)="selectUser()">
        </mat-checkbox>
      </td>
    </ng-container>
    <ng-template #notSelect>
      <ng-container *ngIf="column.columnDef === 'edit'; else notSelect1">
        <th id="" style="text-align: center !important;" mat-header-cell *matHeaderCellDef>
          {{ column.header }}
        </th>
        <td style="text-align: center !important;" mat-cell *matCellDef="let row">
          <img alt="assets//images/edit_icon.svg" src="assets//images/edit_icon.svg" title="Amend" (click)="highlightRow(row)" (click)="editable($event, row)"
            style="cursor: pointer;  margin-top: 6px; margin-left: 16px;" />
        </td>
      </ng-container>
      
      <ng-container *ngIf="column.columnDef === 'tax_edits'; else notSelect1">
        <th id="" style="text-align: center !important;" mat-header-cell *matHeaderCellDef>
          {{ column.header }}
        </th>
        <td style="text-align: center !important;" mat-cell *matCellDef="let row">
          <img alt="assets//images/edit_icon.svg" src="assets//images/edit_icon.svg" title="Amend" (click)="highlightRow(row)" (click)="editTaxPeriod($event, row)"
            style="cursor: pointer;  margin-top: 6px; margin-left: 16px;" />
        </td>
      </ng-container>

      <ng-container *ngIf="column.columnDef === 'edittaxsrc'; else notSelect1">
        <th id="" style="text-align: center !important;" mat-header-cell *matHeaderCellDef>
          {{ column.header }}
        </th>
        <td style="text-align: center !important;" mat-cell *matCellDef="let row">
          <img alt="assets//images/edit_icon.svg" src="assets//images/edit_icon.svg" title="Amend" (click)="highlightRow(row)" (click)="editTaxSrcCode($event, row)"
            style="cursor: pointer;  margin-top: 6px; margin-left: 16px;" />
        </td>
      </ng-container>


      <ng-container *ngIf="column.columnDef === 'edit_domain'; else notSelect1">
        <th id="" style="text-align: center !important;" mat-header-cell *matHeaderCellDef>
          {{ column.header }}
        </th>
        <td style="text-align: center !important;" mat-cell *matCellDef="let row">
          <img alt="assets//images/edit_icon.svg" src="assets//images/edit_icon.svg" title="Amend" (click)="highlightRow(row)" (click)="editableDomain($event, row)"
            style="cursor: pointer;  margin-top: 6px; margin-left: 16px;" />
        </td>
      </ng-container>
      <ng-container *ngIf="column.columnDef === 'editsrc'; else notSelect1">
        <th id="" style="text-align: center;" style="text-align: center !important;" mat-header-cell *matHeaderCellDef>
          {{ column.header }}
        </th>
        <td style="text-align: center;" style="text-align: center !important;" mat-cell *matCellDef="let row">
          <img alt="assets//images/edit_icon.svg" src="assets//images/edit_icon.svg" title="Amend" (click)="highlightRow(row)" (click)="editablesrc($event, row)"
            style="cursor: pointer;  margin-top: 6px; margin-left: 16px;" />
        </td>
      </ng-container>
      <ng-container *ngIf="column.columnDef === 'editsfe'; else notSelect1">
        <th id="" style="text-align: center;" mat-header-cell *matHeaderCellDef>
          {{ column.header }}
        </th>
        <td style="text-align: center;" mat-cell *matCellDef="let row">
          <img alt="assets//images/edit_icon.svg" src="assets//images/edit_icon.svg" title="Amend" (click)="highlightRow(row)" (click)="editsubmitFund($event, row)"
            style="cursor: pointer;  margin-top: 6px; margin-left: 16px;" />
        </td>
      </ng-container>
      <ng-container *ngIf="column.columnDef === 'edits'; else notSelect1">
        <th id="" style="text-align: center;" mat-header-cell *matHeaderCellDef>
          {{ column.header }}
        </th>
        <td style="text-align: center;" mat-cell *matCellDef="let row">
          <img alt="assets//images/edit_icon.svg" src="assets//images/edit_icon.svg" title="Amend" (click)="highlightRow(row)" (click)="editabletax($event, row)"
            style="cursor: pointer;  margin-top: 6px; margin-left: 16px;" />
        </td>
      </ng-container>
      <ng-container *ngIf="column.columnDef === 'editmessage'; else notSelect1">
        <th id="" style="text-align: center;" mat-header-cell *matHeaderCellDef>
          {{ column.header }}
        </th>
        <td style="text-align: center;" mat-cell *matCellDef="let row">
          <img alt="assets//images/edit_icon.svg" src="assets//images/edit_icon.svg" title="Amend" (click)="highlightRow(row)" (click)="editablemessage($event, row)"
            style="cursor: pointer;  margin-top: 6px; margin-left: 16px;" />
        </td>
      </ng-container>
      <ng-container *ngIf="column.columnDef === 'newedit'; else notSelect1">
        <th id="" mat-header-cell *matHeaderCellDef>
          {{ column.header }}
        </th>
        <td mat-cell *matCellDef="let row">
          <img alt="assets//images/edit_icon.svg" src="assets//images/edit_icon.svg" title="Amend" (click)="highlightRow(row)" (click)="neweditable($event, row)"
            style="cursor: pointer;  margin-top: 6px; margin-left: 16px;" />
        </td>
      </ng-container>
      <ng-container *ngIf="column.columnDef === 'radio'; else notSelect1">
        <th id="" style="text-align: center;" mat-header-cell *matHeaderCellDef>
          {{ column.header }}
        </th>
        <td style="text-align: center;" mat-cell *matCellDef="let row">
          <mat-radio-button disableRipple class="example-radio-button" (click)="highlightRow(row)" (change)="radiochecked($event,row)">
          </mat-radio-button>
        </td>
      </ng-container>
      <ng-template #notSelect1>
        <ng-container *ngIf="column.columnDef === 'submission_domain_flag'; else notSelect2">
          <th id="" style="text-align: center;" mat-header-cell *matHeaderCellDef>
            {{ column.header }}
          </th>
          <td style="text-align: center;" mat-cell *matCellDef="let row">
            <label class="switch">
              <input disabled="true" [checked]="row.submission_domain_flag" type="checkbox"
                (change)="selectRow($event,row)" (change)="selectUser()">
              <span class="slider round"></span>
            </label>
          </td>
        </ng-container>
        <ng-container *ngIf="column.columnDef === 'validation_flag'; else notSelect2">
          <th id="" style="text-align: center;" mat-header-cell *matHeaderCellDef>
            {{ column.header }}
          </th>
          <td style="text-align: center;" mat-cell *matCellDef="let row">
            <label class="switch">
              <input disabled="true" [checked]="row.validation_flag" type="checkbox" (change)="selectRow($event,row)"
                (change)="selectUser()">
              <span class="slider round"></span>
            </label>
          </td>
        </ng-container>
        <ng-template #notSelect2>
          <th id="" mat-header-cell *cdkHeaderCellDef>{{ column.header }}</th>
          <td mat-cell style="text-align: left;" [style.color]="column.header=='Status'?row.color:column.header=='Error'?'#D23C3C':'#282828'"
            [style.font-weight]="column.header=='Status'?'600':column.header=='Error'?'600':'normal'"
            *cdkCellDef="let row">
            <div class="container" style="padding: 0px;">
              <div class="text">
                <span [ngClass]="{boldText: selection2.isSelected(row)}">{{ column.cell(row) }} </span>
              </div>
              <div class="image">
                <img alt ="Show more"
                  *ngIf="column.header=='Tax Module' || column.header=='Source System' ||  column.header=='Submitting Entity' || column.header=='Fund Entity' || column.header=='Product Code' || column.header=='Tax Source Code'"
                  (click)="column.header=='Tax Module'?openDialog1('tax' , row):column.header=='Source System'?openDialog1('src', row):column.header=='Submitting Entity'?openDialog1('subent' , row):column.header=='Fund Entity'?openDialog1('funent', row):column.header=='Product Code'?openDialog1('productCode', row):column.header=='Tax Source Code'?openDialog1('taxSrcCode', row):'openDialog1'"
                  class="threeDots" src="assets/images/Group 359.png" title="Show more" />
              </div>
            </div>
          </td>
        </ng-template>
      </ng-template>
    </ng-template>
  </ng-container>
  <tr class="trTable" mat-header-row class="tableHeader" *matHeaderRowDef="columnsToDisplay"></tr>
  <tr class="trTable" mat-row *matRowDef="
                let row;
                columns: columnsToDisplay
                  | paginate
                    : {
                     
                        itemsPerPage: size,
                        currentPage: p,
                        totalItems: totalRowdata
                      }
              " [ngClass]="{highlighted: selection2.isSelected(row)}" ></tr>
</table>
<div class="pegidiv" *ngIf="dataSource.filteredData.length>0">
  <pagination-controls (pageChange)="p = $event; paginate(p)" [directionLinks]="directionLinks" class="pagination"
    [previousLabel]="labels.previousLabel" [nextLabel]="labels.nextLabel"></pagination-controls>
</div>